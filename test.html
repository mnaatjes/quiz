<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <!--w3 Fonts -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!--Font Awesome Update-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <!--Main CSS Document-->
    <link rel="stylesheet" href="styles/main.css">
    <head>
        <title>CIS174: Quiz - Splashpage</title>
    </head>
    <body>
        <h1>Test</h1>
        <button id="button" style="align-self: flex-end;" onclick="btnClick()">Click Me</button>
    </body>
    <script src="scripts/js/functions_main.js" type="text/Javascript"></script>
    <script>
        let storage_name = 'gdgdfggdggddgdf';
        let test_obj = {pet: "Apollo", color: "orange", size: "chuncky"};
        // check
        function checkSet(storage_name, object){
            localStorage.setItem(storage_name, JSON.stringify(object));
            if(localStorage.hasOwnProperty(storage_name)){console.log('SUCCESS!')}
            else { console.log(1); setTimeout(checkSet(storage_name, object), 0);}
        }

        function btnClick(){
            console.log(storage_name);
            console.log(test_obj);
            // fetch json
            fetchJSON('scripts/JSON/test.json', function(json){
                // set timeout for setitem
                checkSet(storage_name, test_obj);
            });

            let item = checkGet(storage_name);
            console.log(item);
        }
        // set item
        //localStorage.setItem(storage_name, JSON.stringify(test_obj));

        // get item
        // timeout
        function checkGet(storage_name){
            let result = localStorage.getItem(storage_name);
            if(result != null){return JSON.parse(result);}
            else { console.log(1); setTimeout(checkGet(storage_name), 0);}
        }
    </script>
</html>